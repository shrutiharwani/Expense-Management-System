{% extends 'base.html' %}

{% block title %}Expenses{% endblock %}

{% block content %}
<div class="content-wrapper">
    <!-- Flash Messages Section -->
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="flash-messages">
                <ul>
                    {% for message in messages %}
                        <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
    {% endwith %}

    <h2>Log an Expense</h2>
    <form method="POST" class="expense-form">
        {{ form.hidden_tag() }}
        
        <div>
            <label for="expense_type">{{ form.expense_type.label }}</label>
            {{ form.expense_type }}
        </div>
        <div>
            <label for="quantity">{{ form.quantity.label }}</label>
            {{ form.quantity }}
        </div>
        <div>
            <label for="item_name">{{ form.item_name.label }}</label>
            {{ form.item_name }}
        </div>
        <div>
            <label for="unit_price">{{ form.unit_price.label }}</label>
            {{ form.unit_price }}
        </div>
        <div>
            <label for="gst_amount">{{ form.gst_amount.label }}</label>
            {{ form.gst_amount }}
        </div>
        <div>
            <label for="invoice_number">{{ form.invoice_number.label }}</label>
            {{ form.invoice_number }}
        </div>
    
        <!-- Seller Input (Manual Entry) -->
        <div>
            <label for="seller_name">Seller Name</label>
            {{ form.seller_name }}
        </div>
        <div>
            <label for="gstn">GSTN</label>
            {{ form.gstn }}
        </div>
    
        <div>
            <label for="employee_id">{{ form.employee_id.label }}</label>
            {{ form.employee_id }}
        </div>
    
        <!-- Project Dropdown -->
        <div>
            <label for="project_id">{{ form.project_id.label }}</label>
            {{ form.project_id }}
        </div>
    
        <div>
            {{ form.submit }}
        </div>
    </form>    
    
    <hr>
    <h3>Logged Expenses</h3>
    <table>
        <thead>
            <tr>
                <th>Item Name</th>
                <th>Total Amount</th>
            </tr>
        </thead>
        <tbody>
            {% for expense in expenses %}
            <tr>
                <td>{{ expense.item_name }}</td>
                <td>{{ expense.total_amount }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
